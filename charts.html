<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Population & Economic Dynamics in Puerto Rico</title>

  <script src="https://cdn.tailwindcss.com"></script>

  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin=""/>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin=""></script>

  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

  <style>
    /* Cards + hero */
    .card {
      background:#fff;
      border-radius:1rem;
      box-shadow:0 10px 15px -3px rgba(0,0,0,.1), 0 4px 6px -2px rgba(0,0,0,.05);
      overflow:visible;
    }
    .hero {
      background:
        radial-gradient(1200px 600px at 20% -10%, rgba(239,68,68,.12), transparent 60%),
        radial-gradient(1200px 600px at 80% -10%, rgba(37,99,235,.10), transparent 60%),
        linear-gradient(180deg, #fafafa 0%, #f3f4f6 100%);
    }

    /* Map â€” trimmed height so charts show sooner */
    #map { height: 48vh; width: 100%; border-radius: .75rem; }
    @media (min-width: 1280px) { #map { height: 46vh; } }
    @media (max-width: 640px)  { #map { height: 54vh; } }

    .leaflet-tooltip {
      background: rgba(255,255,255,.95);
      border-color:#333;
      color:#111827;
      font-size:14px;
      font-weight:600;
      box-shadow:0 2px 5px rgba(0,0,0,.2);
      padding:5px 10px;
    }

    /* Mini charts area */
    .mini { min-height: 260px; }

    /* --- Dropdown base state & transitions --- */
    #metrics-menu {
      opacity: 0;
      visibility: hidden;
      transform: translateY(4px);
      pointer-events: none;
      transition: opacity .15s ease, transform .15s ease, visibility .15s ease;
    }
    /* Show menu when hovering root or while JS adds .hovering for grace period */
    #metrics-dropdown-root:hover #metrics-menu,
    #metrics-dropdown-root.hovering #metrics-menu {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
      pointer-events: auto;
    }
    /* Rotate chevron when open */
    #metrics-dropdown-root:hover #metrics-chevron,
    #metrics-dropdown-root.hovering #metrics-chevron {
      transform: rotate(180deg);
    }
  </style>
</head>
<body class="bg-gray-50 text-gray-900 font-sans">

  <nav class="bg-white shadow sticky top-0 z-50">
    <div class="max-w-7xl mx-auto px-4 py-3 flex items-center justify-center gap-6 text-sm sm:text-base">
      <a href="../index.html"   class="nav-link border-b-2 border-transparent">Home</a>

      <div class="relative" id="metrics-dropdown-root">
        <a href="../metrics.html" class="nav-link border-b-2 border-transparent inline-flex items-center gap-1 cursor-pointer select-none">
          Metrics
          <svg id="metrics-chevron" xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 transition-transform" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
            <path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 11.17l3.71-3.94a.75.75 0 111.08 1.04l-4.24 4.5a.75.75 0 01-1.08 0l-4.24-4.5a.75.75 0 01.02-1.06z" clip-rule="evenodd"/>
          </svg>
        </a>
        <div id="metrics-menu" class="absolute right-0 mt-2 w-64 rounded-xl border border-gray-200 bg-white shadow-lg ring-1 ring-black/5 z-50">
          <div class="py-2">
            <a href="../metrics.html"               class="block px-4 py-2 hover:bg-gray-50 font-semibold">All Metrics Overview</a>
            <div class="my-1 border-t border-gray-100"></div>
            <a href="population.html"     class="block px-4 py-2 hover:bg-gray-50">Population</a>
            <a href="employment.html"     class="block px-4 py-2 hover:bg-gray-50">Employment Rate</a>
            <a href="establishments.html" class="block px-4 py-2 hover:bg-gray-50">Employer Establishments</a>
            <a href="income.html"         class="block px-4 py-2 hover:bg-gray-50">Household Income</a>
            <a href="housing.html"        class="block px-4 py-2 hover:bg-gray-50">Housing Units</a>
            <a href="education.html"      class="block px-4 py-2 hover:bg-gray-50">Education</a>
            <a href="health.html"         class="block px-4 py-2 hover:bg-gray-50">Health</a>
          </div>
        </div>
      </div>

      <a href="../charts.html"  class="nav-link border-b-2 border-transparent">Literature</a>
      <a href="../strategy.html"class="nav-link border-b-2 border-transparent">Strategy</a>
      <a href="../about.html"   class="nav-link border-b-2 border-transparent">About</a>
    </div>
  </nav>

  <main class="max-w-7xl mx-auto px-4 py-8 space-y-8">

    <header class="card hero p-6 sm:p-8 lg:p-10 relative">
      <div class="flex flex-col lg:flex-row lg:items-start lg:justify-between">
          <div>
              <p class="text-sm font-semibold text-gray-500 uppercase">Graduate Independent Study</p>
              <h1 class="mt-2 text-4xl sm:text-5xl font-extrabold leading-tight">
                  Population & Economic Dynamics in Puerto Rico
              </h1>
              <p class="mt-3 text-lg text-gray-700">
                  A graduate research project examining demographic shifts, out-migration, and sustainable development
                  strategies through linked data analysis and policy synthesis.
              </p>
              <div class="mt-5">
                  <span class="inline-flex items-center gap-2 px-3 py-2 rounded-lg bg-slate-100 text-slate-800">
                      <span class="inline-flex w-5 h-5 items-center justify-center rounded-full bg-slate-800 text-white text-xs">i</span>
                      Literature Review
                  </span>
              </div>
          </div>
      </div>

      <div class="absolute bottom-4 right-4 group">
        <div class="text-right">
          <span class="text-sm font-semibold text-gray-700 cursor-pointer group-hover:text-blue-700 transition">
            Project Customer: Puerto Rico Planning Board
          </span>
        </div>

        <div class="absolute right-0 bottom-full mb-2 w-96 bg-white text-gray-800 p-4 rounded-lg shadow-xl border border-gray-200 opacity-0 group-hover:opacity-100 transition-opacity duration-200 z-50">
          <p class="text-gray-700 text-sm">
            The Planning Board oversees long-term economic development, demographic analysis, and land-use
            planning for Puerto Rico. This projectâ€™s interactive maps, municipal-level dashboards, and
            population change analyses provide actionable insights that could directly support their policy
            models and strategic decision-making.
          </p>
          <p class="text-sm mt-3">
            ðŸ”— <a href="https://jp.pr.gov" target="_blank" rel="noopener" class="text-blue-600 underline">
              Visit Puerto Rico Planning Board Website
            </a>
          </p>
        </div>
      </div>
    </header>

    <section class="card p-6 prose max-w-none">
      <p class="lead">
        Puerto Rico faces a complex, interconnected crisis of demographic decline and economic stagnation.
        This literature review synthesizes key drivers of these challenges, including out-migration, low
        fertility rates, and the legacy of economic policies.
      </p>

      <h2>The Drivers of Population Decline</h2>
      <ul class="list-disc space-y-3">
        <li>
          <span class="font-semibold">Out-Migration:</span> The most dynamic factor in population loss is the
          exodus of working-age residents, particularly intensified by Hurricane Maria. This trend has
          resulted in sharp declines in student enrollment and has strained the labor force.
        </li>
        <li>
          <span class="font-semibold">Demographic Changes:</span> The population is both shrinking and aging.
          Puerto Rico has one of the world's lowest total fertility rates (TFR) at approximately 0.92,
          and its median age of 45.4 is significantly higher than the U.S. mainland's.
        </li>
        <li>
          <span class="font-semibold">Economic Headwinds:</span> The islandâ€™s unemployment rate remains higher
          and its median wages are less than half of the U.S. national average. This wage gap, coupled
          with a high cost-of-living relative to income, fuels out-migration.
        </li>
      </ul>

      <h2>Economic Factors & Social Impact</h2>
      <ul class="list-disc space-y-3">
        <li>
          <span class="font-semibold">Depopulation & Contraction:</span> A smaller, older population places
          immense strain on the economy, leading to a contraction in consumer spending and an erosion
          of the tax base.
        </li>
        <li>
          <span class="font-semibold">Poverty & Inequality:</span> Poverty is pervasive, affecting all 78
          municipalities with rates over 20%. The GINI index, a measure of income inequality, is among
          the highest in any U.S. jurisdiction.
        </li>
        <li>
          <span class="font-semibold">The Legacy of Section 936:</span> The phase-out of the Section 936
          tax credit, which once supported manufacturing, is linked to a period of weakening employment
          and renewed out-migration.
        </li>
      </ul>

      <h2>Strategic Solutions</h2>
      <p class="mt-4">
        Addressing these interconnected crises will require a strategic, long-term approach. The solution
        lies in pivoting from externally dependent industries to fostering a robust, locally anchored
        economy that can retain and attract talent. Data analysis can support this strategy by:
      </p>
      <ul class="list-disc space-y-1 mt-2">
        <li>Modeling the fiscal impacts of continued out-migration.</li>
        <li>Identifying new sectors to replace those lost after the Section 936 phase-out.</li>
        <li>Mapping poverty and inequality to prioritize targeted investments.</li>
        <li>Quantifying the social costs of population decline, such as school closures.</li>
      </ul>
    </section>

  </main>

  <script>
    // ---------------------- Dropdown functionality & active link ----------------------
    function wireDropdown() {
      const root = document.getElementById('metrics-dropdown-root');
      if (!root) return;
      let hoverTimeout;
      const menu = document.getElementById('metrics-menu');

      function addHovering(){ clearTimeout(hoverTimeout); root.classList.add('hovering'); }
      function removeHovering(){ hoverTimeout = setTimeout(()=>root.classList.remove('hovering'), 300); }

      root.addEventListener('mouseenter', addHovering);
      root.addEventListener('mouseleave', removeHovering);
      if (menu) {
        menu.addEventListener('mouseenter', addHovering);
        menu.addEventListener('mouseleave', removeHovering);
      }
    }

    document.addEventListener('DOMContentLoaded', () => {
      // Find the main "Metrics" nav link within the dropdown root
      const metricsLink = document.querySelector('#metrics-dropdown-root > a');
      
      // Check if the current page is a child page within the metrics folder
      const isMetricsSubPage = window.location.pathname.includes('/metrics/');

      if (isMetricsSubPage) {
        // If it's a sub-page, highlight the "Metrics" parent link
        metricsLink.classList.add('border-b-2', 'border-blue-600', 'text-blue-600', 'font-semibold');
        metricsLink.setAttribute('aria-current', 'page');
        
        // And highlight the specific sub-page link within the dropdown
        const currentPathname = window.location.pathname.split('/').pop();
        const subPageLink = document.querySelector(`#metrics-menu a[href="${currentPathname}"]`);
        if (subPageLink) {
          subPageLink.classList.add('bg-gray-100', 'font-semibold');
        }
      } else {
        // If it's a top-level page, highlight the correct top-level link
        document.querySelectorAll('.nav-link[href]').forEach(a => {
          if (a.href.endsWith(window.location.pathname)) {
            a.classList.add('border-b-2', 'border-blue-600', 'text-blue-600', 'font-semibold');
            a.setAttribute('aria-current', 'page');
          }
        });
      }
      // Call the dropdown wire function
      wireDropdown();
    });
  </script>
</body>
</html>